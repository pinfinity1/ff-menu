services:
  app:
    # ğŸ‘‡ Ø§ÛŒÙ…ÛŒØ¬ Ø±Ø§ Ø§Ø² Ø±Ø¬ÛŒØ³ØªØ±ÛŒ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ ØªÙˆ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯
    image: ghcr.io/pinfinity1/ff-menu:latest

    # ğŸ‘‡ Ø¯Ø³ØªÙˆØ± Ø§Ø¬Ø±Ø§ Ø³Ø§Ø¯Ù‡ Ø´Ø¯: ÙÙ‚Ø· Ø¢Ù¾Ø¯ÛŒØª Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ùˆ Ø§Ø³ØªØ§Ø±Øª
    # (Ø¯ÛŒÚ¯Ø± Ø¬Ù†Ø±ÛŒØª Ùˆ Ø¨ÛŒÙ„Ø¯ Ùˆ Ø³ÛŒØ¯ Ø§ÛŒÙ†Ø¬Ø§ Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯)
    command: sh -c "npx prisma db push && npm run prisma:seed && npm start"

    ports:
      - "3000:3000"

    restart: always

    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost:3000"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

    environment:
      NODE_ENV: production
      HOSTNAME: "0.0.0.0"
      PORT: "3000"
      ADMIN_USERNAME: ${ADMIN_USERNAME}
      ADMIN_PASSWORD: ${ADMIN_PASSWORD}

  db:
    restart: always

  minio:
    restart: always
    ports:
      - "9000:9000"
